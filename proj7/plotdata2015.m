%  ME 140:  Spring 2015%  Plots rocket run data generated by Rocket 2007.vi Labview file% Import tab-delimited data, skipping the first row% written for a DAQ Sample Rate of 500 Hz and a run-time of 3.4 secondsclose all clear allclcdataHeader = textread('RocketData.txt','%f',2);sampleRate = dataHeader(1); % Data sample rate [Hz]totalDAQ_Time = dataHeader(2); % Total time data was collected [s]nPts = (totalDAQ_Time)*sampleRate;A = zeros(nPts, 5);% Stores data in columns 2 through 5 of array AA(:,2:5) = dlmread('RocketData.txt','\t',[3 0 nPts+2 3]);for i = 1:length(A)    % Generates a time index for each data point; store it in column 1    A(i,1) = (i-1)/sampleRate;endsizeA = size(A);count = sizeA(1);time = A(1:count,1); % [s]chamP = A(1:count,2); % raw valueresP = A(1:count,3); % raw valuetemp = A(1:count,5) + 273;  % [K]resP = resP - mean(resP(1:10));     % [kPa gage]chamP = chamP - mean(chamP(1:10));  % [kPa gage] ****DC_offset = mean(A(1:10,4));% This on-the-spot average rezeros the load cell based% on the initial loading during the first 10 data pointsTh = A(1:count,4); % raw valueTh = Th - DC_offset;Th(1:35) = 0;Th(count-15:count) = 0;thrust = Th;           % Nstart_index = find(thrust > 5,1);final_index = start_index + sampleRate*(5.5-2.2);impulse = sum(thrust(start_index:final_index)./sampleRate)   % N-smfuel=input('Enter Mass of Burned Fuel [g]:  ');g = 9.8;                        % m/s^2Ru = 8.314;                     % [kJ/(kmol * K)]M_O2 = 32;                      % [kg/kmol] R_O2 = Ru/M_O2;                 % [kJ/(kg * K)]T_res_average = mean(temp);     % [K] approx% O2 orifice diameter = 0.1875 in^2A_orifice = pi * (.0254 * .1875 / 2)^2;        % Area of O2 res. nozzle%% Assuming choked flow through nozzle in reservoir,% stagnation conditions in reservior, and back pressure of % measured chamber pressure, O2 as working fliud,% and isentropic flowCpbarO2_coeff = [1.312e-9 -.7155e-5 1.52e-2 25.48];    CpbarO2 = polyval(CpbarO2_coeff, T_res_average);        % [kJ/(kmol * K)]k_O2 = CpbarO2/(CpbarO2 - Ru);% Add max (Pchoke, 0)P_choked_min = max((resP + 101.325) * (2/(k_O2 + 1))^(k_O2/(k_O2 -1)) - 101.325, 0);       % [kPa gage]% If the chamber pressure is below this minimum pressure% needed for choking (P_choked_min), then the reservoir nozzle% is choked%% Find the total mass of oxygenm_dot_O2 = ((k_O2/(R_O2*1000))^.5) * ...     ((2/(k_O2 + 1))^((k_O2 + 1)/(2*(k_O2 - 1)))) * ...     A_orifice * (101325+resP*1000)./(temp.^.5);                      % pp. 629 F&McD m_O2 = 0;m_O2 = sum(m_dot_O2(2:count).*(time(2:count)-time(1:count-1)))   % [kg]m_total = m_O2 + mfuel/1000; % [kg]Isp = impulse/(m_total*g) %figure(1)plot(time, chamP, 'r', time, 10*thrust, 'b:', time, resP, 'k--', time, P_choked_min, 'g-')legend('Chamber [kPa gage]', '10*Thrust [N]', 'Reservoir [kPa gage]', 'Unchoked orifice pressure');text(0.2, max(resP) * 1.05, ['Mass burned: ' num2str(mfuel) ' g']);